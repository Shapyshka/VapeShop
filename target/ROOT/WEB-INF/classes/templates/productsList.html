<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

    <!-- ✅ Load slick CSS ✅ -->
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.css"
            integrity="sha512-wR4oNhLBHf7smjy0K4oqzdWumd+r5/+6QO/vDda76MW5iug4PT7v86FoEkySIJft3XA0Ae6axhIvHrqwm793Nw=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
    />

    <!-- ✅ Load slick theme CSS ✅ -->
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css"
            integrity="sha512-17EgCFERpgZKcm0j0fEq1YCJuyAWdz9KUtv1EjVuaOz8pDnh/0nZxmU6BBXwaaxqoi9PQXnRWqlcDB027hgv9A=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
    />


    <link href="https://fonts.cdnfonts.com/css/sprite-graffiti" rel="stylesheet">
    <link rel="icon" href="https://i.imgur.com/Y0qpG6p.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
    <title>Каталог - VapeShifter</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="bootstrap/js/bootstrap.min.js" rel="stylesheet" media="screen">
    <link href="bootstrap/js/bootstrap-modal.js" rel="stylesheet" media="screen">
    <link href="bootstrap/js/bootstrap-transition.js" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(92179338, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
    <noscript><div><img src="https://mc.yandex.ru/watch/92179338" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

    <style>
        .loader {
          border: 16px solid #f3f3f3; /* Light grey */
          border-top: 16px solid #3498db; /* Blue */
          border-radius: 50%;
          width: 75px;
          height: 75px;
          animation: spin 2s linear infinite;
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }


    </style>
</head>
<script language="JavaScript">
    if (screen.width<1280){
        document.write("<style>body{zoom:150%}</style>");
    }
</script>
<body style="margin-top:70px; background-color:#eeeeee">
<header th:insert="blocks/header :: Header" ></header>

<div style="align:center;" align="center">
    <div class="justify-content-center" style="background-color:#212529; width:100%; position: fixed; top: 60px; align:center;z-index:10;" align="center" >
        <div align="center">
            <div align="center"  style="width:40%; margin-top:3px; display:inline-block">
                <input type="search" id="sparam" class="form-control" placeholder="Поиск по названию..." aria-label="Title" oninput="searchFunction()" aria-describedby="basic-addon1">
            </div>
            <div align="center" style="display:inline-block; margin-top:3px;">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="sortdrop" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
                     Сорт. по цене
                </button>
                <div th:if="${!opt}" class="dropdown-menu" aria-labelledby="sortdrop">
                    <a class="dropdown-item" href="/products/">По умолчанию</a>
                    <a class="dropdown-item" href="/products/sort/priceasc">Сначала недорогие</a>
                    <a class="dropdown-item" href="/products/sort/pricedesc">Сначала дорогие</a>
                </div>
                <div th:if="${opt}" class="dropdown-menu" aria-labelledby="sortdrop">
                    <a class="dropdown-item" href="/products/opt">По умолчанию</a>
                    <a class="dropdown-item" href="/products/opt/sort/priceasc">Сначала недорогие</a>
                    <a class="dropdown-item" href="/products/opt/sort/pricedesc">Сначала дорогие</a>
                </div>
            </div>
        </div>
        <div style="height:5px"> </div>

        <a th:if="${productstype1.size()>0}" class="nav-link" id="vapeslink" href="#" style="color:#cccccc; display:inline-block">
                                <span style="vertical-align:text-top" class="material-symbols-outlined">
                            vaping_rooms
                            </span>
                                <span style="vertical-align:text-top">
                                    Электроные сигареты
                                </span>
                            </a>

                            <a th:if="${productstype2.size()>0}" class="nav-link" id="moistslink" href="#" style="color:#cccccc; display:inline-block">
                                <span style="vertical-align:text-top" class="material-symbols-outlined">
                            pediatrics
                            </span>
                                <span style="vertical-align:text-top">
                                    Жидкости
                                </span>
                            </a>

                            <a th:if="${productstype3.size()>0}" class="nav-link" id="cartridgelink" href="#" style="color:#cccccc; display:inline-block">
                                        <span style="vertical-align:text-top" class="material-symbols-outlined">
                                    place_item
                                    </span>
                                <span style="vertical-align:text-top">
                                            Картриджи
                                </span>
                            </a>

                            <a th:if="${productstype4.size()>0}" class="nav-link" id="isparlink" href="#" style="color:#cccccc; display:inline-block">
                                        <span style="vertical-align:text-top" class="material-symbols-outlined">
                                    air_freshener
                                    </span>
                                <span style="vertical-align:text-top">
                                            Испарители
                                </span>
                            </a>



        <!-- ✅ load Slick ✅ -->
        <script
                src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"
                integrity="sha512-XtmMtDEcNz2j7ekrtHvOVR4iwwaD6o/FUJe6+Zq+HgcCsk3kj4uSQQR8weQ2QVj1o0Pk6PwYLohm206ZzNfubg=="
                crossorigin="anonymous"
                referrerpolicy="no-referrer"
        ></script>


        <script>
            function searchFunction() {
                let input = document.getElementById('sparam').value;
                input=input.toLowerCase();

                if(input.length>0){
                   document.getElementById('specialsdiv').style.height = "0px";
                   document.getElementById('specialsdiv').style.overflowY = "hidden";

                   var x = document.getElementsByClassName('categorytitle');
                       for (i = 0; i < x.length; i++) {
                            x[i].style.display="none";
                       }
                }
                else{
                   document.getElementById('specialsdiv').style.height = slickheight;
                   document.getElementById('specialsdiv').style.overflowY = "visible";

                   var x = document.getElementsByClassName('categorytitle');
                       for (i = 0; i < x.length; i++) {
                            x[i].style.display="block";
                       }
                }

                var x = document.getElementsByClassName('tovary');
                for (i = 0; i < x.length; i++) {
                    var div1 = x[i].getElementsByTagName('div')[0];
                    var div2 = div1.getElementsByTagName('div')[0];
                    var div3 = div2.getElementsByTagName('div')[0];
                    if (!div3.getElementsByTagName('div')[0].innerHTML.toLowerCase().includes(input)) {
                        x[i].style.display="none";
                    }
                    else {
                        x[i].style.display="block";
                    }
                }
            }
        </script>

        <script>

            $("#moistslink").click(function() {
                $([document.documentElement, document.body]).animate({
                    scrollTop: $("#moistsdiv").offset().top
                }, 100);
            });

            $("#vapeslink").click(function() {
                $([document.documentElement, document.body]).animate({
                    scrollTop: $("#vapesdiv").offset().top
                }, 100);
            });

            $("#cartridgelink").click(function() {
                $([document.documentElement, document.body]).animate({
                    scrollTop: $("#cartridgediv").offset().top
                }, 100);
            });

            $("#isparlink").click(function() {
                $([document.documentElement, document.body]).animate({
                    scrollTop: $("#ispardiv").offset().top
                }, 100);
            });
        </script>
        <div style="height:10px"> </div>


    </div>
</div>

<div style="height:110px"></div>

<div align="center" th:if="${curusname=='admin'}">
    <div style="height:30px"></div>
    <a type="button" class="btn btn-success" style="color:#ffffff" href="/products/add">Добавить товар</a>
</div>
<br>

<div align="center">

    <div id="loader" style="background-color:#dddddd; width:20%" align="center" class="rounded">
        <div style="width:90%">
            <div class="loader"></div>
        </div>
    </div>

    <div align="center" th:if="${opt==true}">
        <span style="font-size:26px; vertical-align:text-top; color:#ff7b00" class="material-symbols-outlined">
            warning
        </span>
        <span style="vertical-align:text-top">
            <i style="font-size:18px; color:#444444; ">
                Чтобы заказать товары оптом - нужно, чтобы их общая стоимость была не менее 6500 ₽
            </i>
        </span>
        <div style="height:15px"></div>
    </div>
        <div id="specialsdiv">
            <div th:if="${specials.size()>5}" >
                <div align="center" style="font-size:35px; ">Скидки</div>
                <br>
                <div class="autoplay" style="width:80%">
                    <div th:each="el:${specials}" >
                        <a th:href="@{/products/{id}(id=${el.getId})}" style="text-decoration:none">
                            <div th:id="${'cuntent'+el.getId()}" class="card shadow-sm">

                                <img th:if="${curusname=='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain; filter: blur(5px);"/>
                                <img th:if="${curusname!='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain;"/>
                                <div class="card-body">
                                    <div >
                                        <div align="left" class="mb-0" id="titul" th:text="${el.getTitle()}" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-size:17px; color:#222222; "></div>
                                        <div style="height:5px"> </div>
                                        <div align="left" style="white-space: nowrap;">
                                            <div style="display:inline-block;">
                                                <h5  class="text-dark mb-0" th:text="${el.getPrice()+' ₽  '}" style="white-space: nowrap;"/>
                                            </div>
                                            <div th:if="${el.getOldprice()!=null}"  style="color:#FF0000; text-decoration: line-through; display:inline-block;">
                                                <span th:text="${el.getOldprice()+' ₽'}" style="font-size:14px; color:#777777; "/>
                                            </div>
                                        </div>
                                        <div align="left" th:if="${el.getQuantity()!=null}">
                                            <i class="mb-0" th:text="${'В наличии: '+el.getQuantity()+' шт.'}" style="font-size:15px; color:#444444; "></i>
                                        </div>
                                        <div style="height:15px"> </div>
                                    </div>


                                        <a th:if="${el.getQuantity()!=0 && curusname!='anonymousUser'}" type="button" class="btn btn-sm btn-outline-dark" href="#" data-toggle="modal" th:data-target="${'#modalcart'+el.getId().toString()}" style="display: inline-block; vertical-align: text-top; margin-bottom:10px; font-size:14px; white-space: nowrap; ">
                                                    <span class="material-symbols-outlined" style="font-size:16px;">
                                                        shopping_cart
                                                    </span>
                                            В корзину
                                        </a>

                                    <a type="button" class="btn btn-sm btn-dark" th:href="@{/products/{id}(id=${el.getId})}" style="display: inline-block; vertical-align: text-top; margin-bottom:10px; font-size:14px;">
                                        Подробнее...
                                    </a>

                                </div>
                            </div>
                        </a>
                    </div>
                </div>

                <script type="text/javascript">

                $(document).ready(function(){
                  $('.autoplay').slick({
                  dots: true,
              infinite: true,
                      slidesToShow: 5,
                      slidesToScroll: 1,
                      autoplay: true,
                      autoplaySpeed: 3500,
                       responsive: [
                {
                  breakpoint: 1024,
                  settings: {
                    slidesToShow: 3,
                    slidesToScroll: 1,
                    infinite: true,
                    dots: true,
                    autoplay: true,
                      autoplaySpeed: 3500
                  }
                },
                {
                  breakpoint: 600,
                  settings: {
                    slidesToShow: 2,
                    slidesToScroll: 1,
                    autoplay: true,
                      autoplaySpeed: 3500
                  }
                },
                {
                  breakpoint: 480,
                  settings: {
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    autoplay: true,
                      autoplaySpeed: 3500
                  }
                }
                // You can unslick at a given breakpoint now by adding:
                // settings: "unslick"
                // instead of a settings object
              ]
                    });
                });

              </script>
            </div>
        </div>
    <script>
        var slickheight=document.getElementById('specialsdiv').style.height;
    </script>


    <div class="album py-2" >
        <div class="container">
            <div align="center" class="categorytitle" th:if="${productstype1.size()>0}" style="font-size:35px;" >
                <div id="vapesdiv" style="height:15px"></div>
                Электронные сигареты и Pod системы
                <div style="height:15px"> </div>
            </div>
            <div th:if="${productstype1.size()>0}" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5 g-3">
                <div th:each="el:${productstype1}" class="col tovary">
                    <a th:href="@{/products/{id}(id=${el.getId})}" style="text-decoration:none">
                        <div th:id="${'cuntent'+el.getId()}" class="card shadow-sm">

                            <img th:if="${curusname=='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain; filter: blur(5px);"/>
                            <img th:if="${curusname!='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain;"/>
                            <div class="card-body">
                                <div >
                                    <div align="left" class="mb-0" th:text="${el.getTitle()}" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-size:17px; color:#222222; "></div>
                                    <div style="height:5px"> </div>
                                    <div align="left" style="white-space: nowrap;">
                                        <div style="display:inline-block;">
                                            <h5  class="text-dark mb-0" th:text="${el.getPrice()+' ₽  '}" style="white-space: nowrap;"/>
                                        </div>
                                        <div th:if="${el.getOldprice()!=null}"  style="color:#FF0000; text-decoration: line-through; display:inline-block;">
                                            <span th:text="${el.getOldprice()+' ₽'}" style="font-size:14px; color:#777777; "/>
                                        </div>
                                    </div>
                                    <div align="left" th:if="${el.getQuantity()!=null}">
                                        <i class="mb-0" th:text="${'В наличии: '+el.getQuantity()+' шт.'}" style="font-size:15px; color:#444444; "></i>
                                    </div>
                                    <div style="height:15px"> </div>
                                </div>

                                    <a th:if="${el.getQuantity()!=0 && curusname!='anonymousUser'}" type="button" class="btn btn-sm btn-outline-dark" href="#" data-toggle="modal" th:data-target="${'#modalcart'+el.getId().toString()}" style="display: inline-block; vertical-align: text-top; margin-bottom:10px; font-size:14px; white-space: nowrap; ">
                                        <span class="material-symbols-outlined" style="font-size:16px;">
                                            shopping_cart
                                        </span>
                                        В корзину
                                    </a>

                                <a type="button" class="btn btn-sm btn-dark" th:href="@{/products/{id}(id=${el.getId})}" style="display: inline-block; vertical-align: text-top; margin-bottom:10px; font-size:14px;">
                                        Подробнее...
                                    </a>

                                <div th:if="${curusname=='admin'}">
                                    <div class="dropdown" >
                                        <button class="btn btn-outline-dark" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                 <span class="material-symbols-outlined" style="font-size:14px">
                                                     more_horiz
                                                 </span>
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" th:href="'/products/'+${el.getId()}+'/edit'">Изменить</a>
                                            <a class="dropdown-item" href="#" data-toggle="modal" th:data-target="${'#modal'+el.getId().toString()}">Удалить</a>
                                        </div>
                                        <div class="modal fade" th:id="${'modal'+el.getId().toString()}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel">Подтверждение удаления</h5>
                                                        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">
                                                        </button>
                                                    </div>
                                                    <div class="modal-body" align="center" >
                                                        Вы уверены что хотите удалить товар? Это действие нельзя отменить
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                                                        <form th:action="'/products/'+${el.getId()}+'/del'" method="post">
                                                            <button type="submit" class="btn btn-danger">
                                                                     <span class="material-symbols-outlined" style="font-size:15px">
                                                                     delete
                                                                     </span>Удалить
                                                            </button>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                    <script th:inline="javascript">document.getElementById("cuntent"+"[[${el.getId()}]]").style.display = "block";</script>

                </div>
            </div>

            <div class="categorytitle" th:if="${productstype2.size()>0}"  align="center" style="font-size:35px;">
                <div id ="moistsdiv" style="height:15px"></div>
                Жидкости
                <div style="height:15px"> </div>
            </div>
            <div th:if="${productstype2.size()>0}" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5 g-3">
                <div th:each="el:${productstype2}" class="col tovary">
                    <a th:href="@{/products/{id}(id=${el.getId})}" style="text-decoration:none">
                        <div th:id="${'cuntent'+el.getId()}" class="card shadow-sm">

                            <img th:if="${curusname=='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain; filter: blur(5px);"/>
                            <img th:if="${curusname!='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain;"/>
                            <div class="card-body">
                                <div >
                                    <div align="left" class="mb-0" th:text="${el.getTitle()}" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-size:17px; color:#222222; "></div>
                                    <div style="height:5px"> </div>
                                    <div align="left" style="white-space: nowrap;">
                                        <div style="display:inline-block;">
                                            <h5  class="text-dark mb-0" th:text="${el.getPrice()+' ₽  '}" style="white-space: nowrap;"/>
                                        </div>
                                        <div th:if="${el.getOldprice()!=null}"  style="color:#FF0000; text-decoration: line-through; display:inline-block;">
                                            <span th:text="${el.getOldprice()+' ₽'}" style="font-size:14px; color:#777777; "/>
                                        </div>
                                    </div>
                                    <div align="left" th:if="${el.getQuantity()!=null}">
                                        <i class="mb-0" th:text="${'В наличии: '+el.getQuantity()+' шт.'}" style="font-size:15px; color:#444444; "></i>
                                    </div>
                                    <div style="height:15px"> </div>
                                </div>

                                <a th:if="${el.getQuantity()!=0 && curusname!='anonymousUser'}" type="button" class="btn btn-sm btn-outline-dark" href="#" data-toggle="modal" th:data-target="${'#modalcart'+el.getId().toString()}" style="display: inline-block; vertical-align: text-top; margin-bottom:10px; font-size:14px; white-space: nowrap; ">
                                        <span class="material-symbols-outlined" style="font-size:16px;">
                                            shopping_cart
                                        </span>
                                    В корзину
                                </a>

                                <a type="button" class="btn btn-sm btn-dark" th:href="@{/products/{id}(id=${el.getId})}" style="display: inline-block; vertical-align: text-top; margin-bottom:10px; font-size:14px;">
                                    Подробнее...
                                </a>

                                <div th:if="${curusname=='admin'}">
                                    <div class="dropdown" >
                                        <button class="btn btn-outline-dark" type="button" id="dropdownMenuButton2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                 <span class="material-symbols-outlined" style="font-size:14px">
                                                     more_horiz
                                                 </span>
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                                            <a class="dropdown-item" th:href="'/products/'+${el.getId()}+'/edit'">Изменить</a>
                                            <a class="dropdown-item" href="#" data-toggle="modal" th:data-target="${'#modal'+el.getId().toString()}">Удалить</a>
                                        </div>
                                        <div class="modal fade" th:id="${'modal'+el.getId().toString()}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel3" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel3">Подтверждение удаления</h5>
                                                        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">
                                                        </button>
                                                    </div>
                                                    <div class="modal-body" align="center" >
                                                        Вы уверены что хотите удалить товар? Это действие нельзя отменить
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                                                        <form th:action="'/products/'+${el.getId()}+'/del'" method="post">
                                                            <button type="submit" class="btn btn-danger">
                                                                     <span class="material-symbols-outlined" style="font-size:15px">
                                                                     delete
                                                                     </span>Удалить
                                                            </button>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                    <script th:inline="javascript">document.getElementById("cuntent"+"[[${el.getId()}]]").style.display = "block";</script>
                </div>
            </div>

            <div class="categorytitle" th:if="${productstype3.size()>0}"  align="center" style="font-size:35px;">
                <div id ="cartridgediv" style="height:15px"></div>
                Картриджи
                <div style="height:15px"> </div>
            </div>
            <div th:if="${productstype3.size()>0}" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5 g-3">
                <div th:each="el:${productstype3}" class="col tovary">
                    <a th:href="@{/products/{id}(id=${el.getId})}" style="text-decoration:none">
                        <div th:id="${'cuntent'+el.getId()}" class="card shadow-sm">

                            <img th:if="${curusname=='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain; filter: blur(5px);"/>
                            <img th:if="${curusname!='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain;"/>
                            <div class="card-body">
                                <div >
                                    <div align="left" class="mb-0" th:text="${el.getTitle()}" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-size:17px; color:#222222; "></div>
                                    <div style="height:5px"> </div>
                                    <div align="left" style="white-space: nowrap;">
                                        <div style="display:inline-block;">
                                            <h5  class="text-dark mb-0" th:text="${el.getPrice()+' ₽  '}" style="white-space: nowrap;"/>
                                        </div>
                                        <div th:if="${el.getOldprice()!=null}"  style="color:#FF0000; text-decoration: line-through; display:inline-block;">
                                            <span th:text="${el.getOldprice()+' ₽'}" style="font-size:14px; color:#777777; "/>
                                        </div>
                                    </div>
                                    <div align="left" th:if="${el.getQuantity()!=null}">
                                        <i class="mb-0" th:text="${'В наличии: '+el.getQuantity()+' шт.'}" style="font-size:15px; color:#444444; "></i>
                                    </div>
                                    <div style="height:15px"> </div>
                                </div>

                                <a th:if="${el.getQuantity()!=0 && curusname!='anonymousUser'}" type="button" class="btn btn-sm btn-outline-dark" href="#" data-toggle="modal" th:data-target="${'#modalcart'+el.getId().toString()}" style="display: inline-block; vertical-align: text-top; margin-bottom:10px; font-size:14px; white-space: nowrap; ">
                                        <span class="material-symbols-outlined" style="font-size:16px;">
                                            shopping_cart
                                        </span>
                                    В корзину
                                </a>

                                <a type="button" class="btn btn-sm btn-dark" th:href="@{/products/{id}(id=${el.getId})}" style="display: inline-block; vertical-align: text-top; margin-bottom:10px; font-size:14px;">
                                    Подробнее...
                                </a>

                                <div th:if="${curusname=='admin'}">
                                    <div class="dropdown" >
                                        <button class="btn btn-outline-dark" type="button" id="dropdownMenuButton3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                 <span class="material-symbols-outlined" style="font-size:14px">
                                                     more_horiz
                                                 </span>
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton3">
                                            <a class="dropdown-item" th:href="'/products/'+${el.getId()}+'/edit'">Изменить</a>
                                            <a class="dropdown-item" href="#" data-toggle="modal" th:data-target="${'#modal'+el.getId().toString()}">Удалить</a>
                                        </div>
                                        <div class="modal fade" th:id="${'modal'+el.getId().toString()}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel4" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel4">Подтверждение удаления</h5>
                                                        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">
                                                        </button>
                                                    </div>
                                                    <div class="modal-body" align="center" >
                                                        Вы уверены что хотите удалить товар? Это действие нельзя отменить
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                                                        <form th:action="'/products/'+${el.getId()}+'/del'" method="post">
                                                            <button type="submit" class="btn btn-danger">
                                                                     <span class="material-symbols-outlined" style="font-size:15px">
                                                                     delete
                                                                     </span>Удалить
                                                            </button>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                    <script th:inline="javascript">document.getElementById("cuntent"+"[[${el.getId()}]]").style.display = "block";</script>
                </div>
            </div>

            <div class="categorytitle" th:if="${productstype4.size()>0}"  align="center" style="font-size:35px;">
                <div id ="ispardiv" style="height:15px"></div>
                Испарители
                <div style="height:15px"> </div>
            </div>
            <div th:if="${productstype4.size()>0}" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5 g-3">
                <div th:each="el:${productstype4}" class="col tovary">
                    <a th:href="@{/products/{id}(id=${el.getId})}" style="text-decoration:none">
                        <div th:id="${'cuntent'+el.getId()}" class="card shadow-sm">

                            <img th:if="${curusname=='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain; filter: blur(5px);"/>
                            <img th:if="${curusname!='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain;"/>
                            <div class="card-body">
                                <div >
                                    <div align="left" class="mb-0" th:text="${el.getTitle()}" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-size:17px; color:#222222; "></div>
                                    <div style="height:5px"> </div>
                                    <div align="left" style="white-space: nowrap;">
                                        <div style="display:inline-block;">
                                            <h5  class="text-dark mb-0" th:text="${el.getPrice()+' ₽  '}" style="white-space: nowrap;"/>
                                        </div>
                                        <div th:if="${el.getOldprice()!=null}"  style="color:#FF0000; text-decoration: line-through; display:inline-block;">
                                            <span th:text="${el.getOldprice()+' ₽'}" style="font-size:14px; color:#777777; "/>
                                        </div>
                                    </div>
                                    <div align="left" th:if="${el.getQuantity()!=null}">
                                        <i class="mb-0" th:text="${'В наличии: '+el.getQuantity()+' шт.'}" style="font-size:15px; color:#444444; "></i>
                                    </div>
                                    <div style="height:15px"> </div>
                                </div>

                                <a th:if="${el.getQuantity()!=0 && curusname!='anonymousUser'}" type="button" class="btn btn-sm btn-outline-dark" href="#" data-toggle="modal" th:data-target="${'#modalcart'+el.getId().toString()}" style="display: inline-block; vertical-align: text-top; margin-bottom:10px; font-size:14px; white-space: nowrap; ">
                                        <span class="material-symbols-outlined" style="font-size:16px;">
                                            shopping_cart
                                        </span>
                                    В корзину
                                </a>

                                <a type="button" class="btn btn-sm btn-dark" th:href="@{/products/{id}(id=${el.getId})}" style="display: inline-block; vertical-align: text-top; margin-bottom:10px; font-size:14px;">
                                    Подробнее...
                                </a>

                                <div th:if="${curusname=='admin'}">
                                    <div class="dropdown" >
                                        <button class="btn btn-outline-dark" type="button" id="dropdownMenuButton4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                 <span class="material-symbols-outlined" style="font-size:14px">
                                                     more_horiz
                                                 </span>
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton4">
                                            <a class="dropdown-item" th:href="'/products/'+${el.getId()}+'/edit'">Изменить</a>
                                            <a class="dropdown-item" href="#" data-toggle="modal" th:data-target="${'#modal'+el.getId().toString()}">Удалить</a>
                                        </div>
                                        <div class="modal fade" th:id="${'modal'+el.getId().toString()}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel6" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel6">Подтверждение удаления</h5>
                                                        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">
                                                        </button>
                                                    </div>
                                                    <div class="modal-body" align="center" >
                                                        Вы уверены что хотите удалить товар? Это действие нельзя отменить
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                                                        <form th:action="'/products/'+${el.getId()}+'/del'" method="post">
                                                            <button type="submit" class="btn btn-danger">
                                                                     <span class="material-symbols-outlined" style="font-size:15px">
                                                                     delete
                                                                     </span>Удалить
                                                            </button>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                    <script th:inline="javascript">document.getElementById("cuntent"+"[[${el.getId()}]]").style.display = "block";</script>
                </div>
            </div>


        </div>
    </div>
    <div th:if="${curusname!='anonymousUser'}">
        <div th:each="el:${products}" style="height:0px" >
            <div style="display: inline-block;" >
        <div class="modal fade" th:id="${'modalcart'+el.getId().toString()}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel2" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel2">Добавить в корзину</h5>
                        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">
                        </button>
                    </div>

                    <iframe name="dummyframe" id="dummyframe" style="display: none;"></iframe>
                    <form th:id="${'myform'+el.getId().toString()}" th:action="'/products/'+${el.getId()}+'/addcart'" th:object="${cart}" method="post" target="dummyframe">
                        <div class="modal-body" align="center" >
                            <div class="card shadow-sm">

                                <img th:if="${curusname=='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain; filter: blur(5px);"/>
                                <img th:if="${curusname!='anonymousUser'}" th:src="${el.getPhotoUrl()}" class="" height="200" width="100%" style="object-fit:contain; "/>
                                <div class="card-body">
                                    <div >
                                        <div align="left" class="mb-0" th:text="${el.getTitle()}" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-size:17px; color:#222222; "></div>
                                        <div style="height:5px"> </div>
                                        <div align="left" style="white-space: nowrap;">
                                            <div style="display:inline-block;">
                                                <h5  class="text-dark mb-0" th:text="${el.getPrice()+' ₽  '}" style="white-space: nowrap;"/>
                                            </div>
                                            <div th:if="${el.getOldprice()!=null}"  style="color:#FF0000; text-decoration: line-through; display:inline-block;">
                                                <span th:text="${el.getOldprice()+' ₽'}" style="font-size:14px; color:#777777; "/>
                                            </div>
                                        </div>
                                        <div align="left" th:if="${el.getQuantity()!=null}">
                                            <i class="mb-0" th:text="${'В наличии: '+el.getQuantity()+' шт.'}" style="font-size:15px; color:#444444; "></i>
                                        </div>
                                        <div style="height:15px"> </div>
                                    </div>
                                    Количество:
                                    <input  type="number" min="1" th:max="${el.getQuantity()}" name="quantity" id ="quantity" placeholder="Количество" value="1" class="form-control" required>

                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                            <button type="submit" th:id="${'bebra'+el.getId().toString()}" class="btn btn-dark" data-toggle="modal" th:data-target="${'#modalcart'+el.getId().toString()}">
                                                                         <span class="material-symbols-outlined" style="font-size:15px">
                                                                         shopping_cart
                                                                         </span>Добавить
                            </button>

                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
        </div>
    </div>

        <div class="modal fade" tabindex="-1" role="dialog" id="ageconfirmmodal" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" align="center">Предупреждение</h5>

                    </div>
                        <div class="modal-body" align="center" >
                                <div class="card-body">
                                    <div style="font-size:16px">
                                        Данный сайт содержит информацию, не предназначенную для просмотра лицами не достигшими возраста 18 лет.

                                    </div>
                                </div>
                            <div class="modal-footer" align="center">
                                <a type="button" class="btn btn-outline-secondary" href="https://www.google.com/search?q=%D0%BF%D0%BE%D1%87%D0%B5%D0%BC%D1%83+%D0%BA%D1%83%D1%80%D0%B8%D1%82%D1%8C+%D1%8D%D0%BB%D0%B5%D0%BA%D1%82%D1%80%D0%BE%D0%BD%D0%BD%D1%8B%D0%B5+%D1%81%D0%B8%D0%B3%D0%B0%D1%80%D0%B5%D1%82%D1%8B+%D0%B2%D1%80%D0%B5%D0%B4%D0%BD%D0%BE&sxsrf=AJOqlzW-rnjNu3HnJ1geaA33fjbSbx-HiQ%3A1674291606236&ei=lqnLY-uDDs-L9u8P0YCToAs&ved=0ahUKEwjrpsKjptj8AhXPhf0HHVHABLQQ4dUDCA8&uact=5&oq=%D0%BF%D0%BE%D1%87%D0%B5%D0%BC%D1%83+%D0%BA%D1%83%D1%80%D0%B8%D1%82%D1%8C+%D1%8D%D0%BB%D0%B5%D0%BA%D1%82%D1%80%D0%BE%D0%BD%D0%BD%D1%8B%D0%B5+%D1%81%D0%B8%D0%B3%D0%B0%D1%80%D0%B5%D1%82%D1%8B+%D0%B2%D1%80%D0%B5%D0%B4%D0%BD%D0%BE&gs_lcp=Cgxnd3Mtd2l6LXNlcnAQAzIECAAQRzIECAAQRzIECAAQRzIECAAQRzIECAAQRzIECAAQRzIECAAQRzIECAAQRzoKCAAQRxDWBBCwA0oECEEYAEoECEYYAFCODliODmDsDmgBcAJ4AIABAIgBAJIBAJgBAKABAcgBCMABAQ&sclient=gws-wiz-serp"
                                >Мне нет 18 лет.</a>
                                <button type="button" class="btn btn-success" data-dismiss="modal">Мне есть 18 лет.</button>
                            </div>
                        </div>
                </div>
            </div>
        </div>

    <script th:inline="javascript">
        /*<![CDATA[*/
            if([[${curusname=='anonymousUser'}]]){
                $('#ageconfirmmodal').modal({backdrop: 'static', keyboard: false})
            }
        /*]]>*/
    </script>

    <script>document.getElementById("loader").style.display = "none";</script>

</div>
<br>
<footer th:insert="blocks/footer :: Footer"></footer>
</body>
</html>