<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=0.6">

    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.0/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.0/slick/slick-theme.css"/>


    <link rel="icon" type="image/ico" href="https://www.vapeshifter.ru/favicon.ico">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
    <title>–ó–∞–∫–∞–∑—ã - VapeShifter</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(92179338, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
    <noscript><div><img src="https://mc.yandex.ru/watch/92179338" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

</head>

<body style="margin-top:70px; background-color:#eeeeee">
<header th:insert="blocks/header :: Header" ></header>
<br>
<div align="center">


    <div align="center" style="font-size:35px;">üßæ–ó–∞–∫–∞–∑—ã:</div>
    <div align="center" style="font-size:30px;" th:if="${orders.size()==0}">
        <br>
        –ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤üòî
    </div>
    <div class="album py-3" align="center">
    <div class="container">
        <div th:each="el:${orders}" class="col">
            <div th:id="${'cuntent'+el.getId()}" class="card shadow-sm" align="center"  style="width:95%" >
                <div class="row row-cols-1 row-cols-sm-1 row-cols-md-1 row-cols-lg-2 g-3">
                    <div class="col" align="center">
                        <div class="card-body" align="center">
                            <div >
                        <div align="center" th:text="${'–ó–∞–∫–∞–∑ ‚Ññ'+el.getId()}" style="font-size:25px; color:#222222; "></div>
                        <div align="center" style="font-size: 23px; " th:id="${'date'+el.getId().toString()}"></div>
                        <script th:inline="javascript">
                             var dnum = [[${(df1.parse(el.getDate().toString())).getTime()}]];
                             var offset = new Date().getTimezoneOffset();
                             var d = new Date();
                             d.setTime(dnum);
                             var s = d.toLocaleDateString('ru-ru', { year:"numeric", month:"long", day:"numeric",hour:"numeric",minute:"numeric"});
                             document.getElementById('date'+[[${el.getId().toString()}]]).textContent= " –æ—Ç "+ s;
                        </script>
                                <ul class="nav justify-content-center border-bottom">
                                </ul>
                        </div>
                            <div th:if="${el.getStatus()=='WaitingPayment'}" style="font-size:18px; color:#222222;">
                                <div >
                                    <div style="display:inline-block;">–°—Ç–∞—Ç—É—Å:</div>  <div class="rounded" style="background-color:#FAF4A1; display:inline-block;"> –û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã</div>
                                </div>
                            </div>
                            <div th:if="${el.getStatus()=='WaitingConfirm'}" style="font-size:18px; color:#222222;">
                                <div>
                                    <div style="display:inline-block;">–°—Ç–∞—Ç—É—Å:</div>  <div class="rounded" style="background-color:#FAF4A1; display:inline-block;"> –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</div>
                                </div>
                            </div>
                            <div th:if="${el.getStatus()=='Confirmed'}" style="font-size:18px; color:#222222;">

                                <div >
                                    <div style="display:inline-block;">–°—Ç–∞—Ç—É—Å:</div>  <div class="rounded" style="background-color:#9FFA99; display:inline-block;">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</div>
                                </div>
                                <div th:if="${el.getSposobpoluch()=='sam1'}">
                                    –° –≤–∞–º–∏ —Å–≤—è–∂—É—Ç—Å—è –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ –ø—Ä–æ—Ñ–∏–ª–µ –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π.
                                </div>
                                <div th:if="${el.getSposobpoluch()=='post'}">
                                    –ó–∞–∫–∞–∑ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ –ø–æ—á—Ç–µ.
                                </div>
                            </div>
                            <div th:if="${el.getStatus()=='notConfirmed'}" style="font-size:18px; color:#222222;">
                               <div >
                                   <div style="display:inline-block;">–°—Ç–∞—Ç—É—Å:</div>  <div class="rounded" style="background-color:#FAA7A0; display:inline-block;">–ü–ª–∞—Ç–µ–∂ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</div>
                               </div>
                                <div>
                                    –ï—Å–ª–∏ –≤—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Å–æ–≤–µ—Ä—à–∏–ª–∏ –ø–µ—Ä–µ–≤–æ–¥, –Ω–∞–ø–∏—à–∏—Ç–µ –≤
                                    <a target="_blank" href="/msg/">–ø–æ–¥–¥–µ—Ä–∂–∫—É</a>
                                </div>

                            </div>
                            <div th:if="${el.getStatus()=='Canceled'}" style="font-size:18px; color:#222222;">

                                <div >
                                    <div style="display:inline-block;">–°—Ç–∞—Ç—É—Å:</div>  <div class="rounded" style="background-color:#FAA7A0; display:inline-block;">–û—Ç–º–µ–Ω–µ–Ω</div>
                                </div>
                            </div>
                            <div th:if="${el.getStatus()=='Finished'}" style="font-size:18px; color:#222222;">
                                <div >
                                    <div style="display:inline-block;">–°—Ç–∞—Ç—É—Å:</div>  <div class="rounded" style="background-color:#BBBBBB; display:inline-block;">–ó–∞–≤–µ—Ä—à–µ–Ω</div>
                                </div>
                            </div>

                            <ul class="nav justify-content-center border-bottom ">
                            </ul>

                            <a style="color:#222222; text-decoration: none;" th:if="${curusname=='admin'}"  th:href="'/users/'+${el.getUser().getUsername()}" >
                                <img class="rounded-circle" th:src="${el.getUser().getAvatarlink()}" style="display:inline-block;" height="25px" width="25px" >
                                <h4 th:text="${el.getUser().getUsername()}" style="display:inline-block;"/>
                            </a>

                            <div style="font-size:18px;">
                                –°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è:
                            </div>
                        <div style="font-size:19px;">
                            <div th:if="${el.getSposobpoluch()=='sam1'}">
                                <label style="white-space: normal; ">–°–∞–º–æ–≤—ã–≤–æ–∑ c –º–µ—Ç—Ä–æ
                                    <a target="_blank" href="https://yandex.ru/maps/213/moscow/stops/4419561430/?ll=37.451773%2C55.715169&tab=overview&z=16">–î–∞–≤—ã–¥–∫–æ–≤–æ</a>
                                </label>
                            </div>
                            <div th:if="${el.getSposobpoluch()=='post'}">
                                <label>–í –æ—Ç–¥–µ–ª–µ–Ω–∏–∏ –ü–æ—á—Ç—ã –†–æ—Å—Å–∏–∏ ‚Ññ
                                    <a target="_blank" th:text="${el.getZipcode()}" th:href="${'https://www.pochta.ru/offices/'+el.getZipcode().toString()}"></a>
                                </label>
                                <br>
                                –ê–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è:
                                    <div th:text="${el.getAdress()}" style="text-decoration:underline"></div>
                            </div>
                        </div>

                            <ul class="nav justify-content-center border-bottom">
                            </ul>


                            <div style="font-size:18px;">
                                –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:
                            </div>
                            <div style="font-size:19px;">
                                <div th:if="${el.getSposoboplaty()=='yoomoney'}">
                                    <label style="white-space: normal; ">
                                        –ü–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ —ç–ª. –∫–æ—à–µ–ª–µ–∫
                                    </label>
                                </div>
                                <div th:if="${el.getSposoboplaty()=='pripoluch'}">
                                    <label style="white-space: normal; ">
                                        –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ª—é–±—ã–º —Å–ø–æ—Å–æ–±–æ–º
                                    </label>
                                </div>
                            </div>

                            <ul class="nav justify-content-center border-bottom">
                            </ul>
                            <div th:if="${el.getCommentary()!=null}" >
                                <div th:if="${el.getCommentary().length()!=0}" style="font-size:18px;">
                                    –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É:
                                    <div th:text="${el.getCommentary()}" style="font-size:20px;"></div>

                                    <ul class="nav justify-content-center border-bottom">
                                    </ul>
                                </div>
                            </div>
                            <div th:if="${el.getPromo()!=null}" style="font-size:18px;">
                                –í–≤–µ–¥–µ–Ω–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥:
                                <div align="center" style="white-space:nowrap">
                                    <div th:text="${el.getPromo().getTitle()}" style="font-size:20px; display:inline-block"></div>
                                    <div th:if="${el.getPromo().getDiscount()!=null}" th:text="${'(-'+el.getPromo().getDiscount()+'%)'}" style="font-size:20px; display:inline-block"></div>

                                    <div th:if="${el.getPromo().getType().contains('freeshipping')}" style="font-size:20px; display:inline-block">
                                        (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞)
                                    </div>

                                </div>
                                <ul class="nav justify-content-center border-bottom">
                                </ul>
                            </div>

                        <div>
                            <div style="display:inline-block; font-size:18px">–í–µ—Å: </div>
                            <div  class="text-dark mb-0" th:text="${(el.getTotalMass()/1000).toString()+' –∫–≥.  '}" style="white-space: nowrap; font-size:18px; display:inline-block; "></div>

                        </div>

                        <div>
                            <div style="display:inline-block; font-size:20px">–ò—Ç–æ–≥–æ: </div>
                            <h4  class="text-dark mb-0" th:text="${(el.getTotalPrice()+el.getTotalPostPrice()).toString()+' ‚ÇΩ  '}" style="white-space: nowrap; display:inline-block; "/>

                        </div>
                            <div style="height:5px"> </div>

                            <div align="center" th:if="${el.getStatus()=='Finished'||el.getStatus()=='Canceled'}">
                                <iframe src="https://yandex.ru/sprav/widget/rating-badge/9387977560?type=rating" width="151" height="51" frameborder="0"></iframe>
                            </div>

                            <a th:if="${el.getStatus()!='Finished' && el.getStatus()!='Canceled'}" type="button" class="btn btn-danger" href="#" data-toggle="modal" th:data-target="${'#modal'+el.getId().toString()}" style="color:#ffffff; font-size:13px;">
                                –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑
                            </a>

                            <div class="modal fade" th:id="${'modal'+el.getId().toString()}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–º–µ–Ω—ã</h5>
                                            <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">
                                            </button>
                                        </div>
                                        <div class="modal-body" align="center" >
                                            –í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑?
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">–ù–∞–∑–∞–¥</button>
                                            <form method="post" th:action="'/order/'+${el.getId()}+'/cancelorder'" th:object="${orders}">
                                                <button style="color:#ffffff;" class="btn btn-danger" type="submit">
                                                    –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col " align="center" >
                        <div style="font-size:20px;">
                            –¢–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ:
                        </div>
                        <div style="height:10px"> </div>
                        <div class="autoplay" style="width:75%;">
                            <div th:each="elem:${cartrep.findByOrder_id(el.getId())}">
                                <div class="card shadow-sm">
                                    <a th:href="@{/products/{id}(id=${elem.getProduct().getId()})}" style="text-decoration:none">
                                        <img loading=lazy th:src="${elem.getProduct().getPhotoUrl().replace('.png','b.png').replace('.jpg','b.jpg')}" height="100" width="100%" style="object-fit:contain;"/>
                                        <div >
                                            <div align="center" class="mb-0" th:text="${elem.getProduct().getTitle()}" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-size:15px; color:#222222; "></div>
                                            <div style="height:3px"> </div>
                                            <div align="center" class="mb-0" th:text="${elem.getQuantity()+' —à—Ç.'}" style="font-size:14px; color:#222222; "></div>
                                            <div style="height:5px"> </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div align="center"   >
                    <div align="center" th:if="${el.getStatus()=='WaitingPayment'||el.getStatus()=='notConfirmed'}">
                        <ul class="nav justify-content-center border-bottom pb-3 mb-3">
                        </ul>
                        <div style="white-space: nowrap; ">
                            <div style="white-space: normal; ">
                                1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–≤–µ—Å—Ç–∏" –∏ —Å–æ–≤–µ—Ä—à–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—É–º–º—ã
                            </div>
                            <iframe src="https://yoomoney.ru/quickpay/fundraise/button?billNumber=50VvoQNABcQ.230117&" width="237px" height="47px" frameborder="0" allowtransparency="true" scrolling="no"></iframe>
                        </div>
                        <div style="white-space: nowrap; ">
                            <div style="white-space: normal; ">
                                2. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É" –∏ –æ–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                            </div>
                            <form method="post" th:action="'/order/'+${el.getId()}+'/confirmpayment'" th:object="${orders}">
                                <button style="color:#ffffff; font-size:17px; " class="btn btn-success" type="submit">
                                    –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É
                                </button>
                            </form>

                            <div style="white-space: normal; ">
                                <label>–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã? –ó–∞–¥–∞–π—Ç–µ –∏—Ö –≤
                                    <a target="_blank" href="/msg/">–ø–æ–¥–¥–µ—Ä–∂–∫–µ</a>
                                </label>
                            </div>
                            <br>
                        </div>
                    </div>

                    <div>
                        <div th:if="${curusname=='admin'}">
                            <div th:if="${el.getStatus()=='WaitingConfirm'}">
                                <br>
                                <form method="post" th:action="'/order/'+${el.getId()}+'/confirmpaymentadmin'" th:object="${orders}">
                                    <button style="color:#ffffff; font-size:18px; " class="btn btn-success" type="submit">
                                        –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É (–∞–¥–º–∏–Ω)
                                    </button>
                                </form>
                                <form method="post" th:action="'/order/'+${el.getId()}+'/notconfirmpaymentadmin'" th:object="${orders}">
                                    <button style="color:#ffffff; font-size:18px; " class="btn btn-danger" type="submit">
                                        –ù–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É (–∞–¥–º–∏–Ω)
                                    </button>
                                </form>
                            </div>
                            <form th:if="${el.getStatus()=='Confirmed'}" method="post" th:action="'/order/'+${el.getId()}+'/finish'" th:object="${orders}">
                                <br>
                                <button style="color:#ffffff; font-size:18px; " class="btn btn-success" type="submit">
                                    –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–∫–∞–∑ (–∞–¥–º–∏–Ω)
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

            </div>

            <div style="height:10px"> </div>
            <script th:inline="javascript">document.getElementById("cuntent"+"[[${el.getId()}]]").style.display = "block";</script>

        </div>
        <script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
        <script type="text/javascript" src="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.0/slick/slick.min.js"></script>

        <script type="text/javascript">

                              $('.autoplay').slick({
                                  dots: true,
                                  infinite: true,
                                  slidesToShow: 3,
                                  slidesToScroll: 1,
                                  autoplay: true,
                                  autoplaySpeed: 3000

                                });
                        </script>


    </div>
</div>
</div>
<footer th:insert="blocks/footer :: Footer"></footer>

</body>
</html>